#!/bin/bash

set -Eeuo pipefail
pgrep -f mapreduce-manager  # check if you already started it
pgrep -f mapreduce-worker  # check if you already started it


mkdir -p var/log
rm -f var/log/mapreduce-manager.log var/log/mapreduce-worker-6002.log var/log/mapreduce-worker-6001.log
mapreduce-manager --host localhost --port 6000 --logfile var/log/mapreduce-manager.log &
sleep 2  # give the Manager time to start
mapreduce-worker --host localhost --port 6001 --manager-host localhost --manager-port 6000 --logfile var/log/mapreduce-worker-6001.log &
mapreduce-worker --host localhost --port 6002 --manager-host localhost --manager-port 6000 --logfile var/log/mapreduce-worker-6002.log &
